# é¡¹ç›®é‡ç»„å®Œæˆ - æ–°ç›®å½•ç»“æ„

## ğŸ“ é‡ç»„åçš„ç›®å½•ç»“æ„

```
meidasupport/
â”œâ”€â”€ frontend/                    # å‰ç«¯ä»£ç  (HTML/CSS/JS)
â”‚   â”œâ”€â”€ package.json            # å‰ç«¯é…ç½®æ–‡ä»¶ âœ¨æ–°å»º
â”‚   â”œâ”€â”€ static/                 # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ styles.css          # (7.8KB) ä¸»æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ app.js              # (7.3KB) å‰ç«¯JavaScripté€»è¾‘
â”‚   â”œâ”€â”€ templates/              # Jinja2 HTMLæ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ admin_home.html     # (27KB) ç®¡ç†å‘˜ä¸»é¡µ
â”‚   â”‚   â”œâ”€â”€ admin_login.html    # (11KB) ç®¡ç†å‘˜ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ admin_permissions.html # (16KB) æƒé™ç®¡ç†é¡µ
â”‚   â”‚   â”œâ”€â”€ admin_roles.html    # (26KB) è§’è‰²ç®¡ç†é¡µ
â”‚   â”‚   â”œâ”€â”€ admin_tickets.html  # (32KB) å·¥å•ç®¡ç†é¡µ
â”‚   â”‚   â”œâ”€â”€ base.html           # (2.9KB) åŸºç¡€æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ booking.html        # (9.6KB) é¢„çº¦æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ index.html          # (3.0KB) é¦–é¡µæ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ issues.html         # (3.5KB) é—®é¢˜é¡µé¢
â”‚   â”‚   â”œâ”€â”€ roles.html          # (18KB) è§’è‰²é¡µé¢
â”‚   â”‚   â”œâ”€â”€ solution.html       # (18KB) è§£å†³æ–¹æ¡ˆé¡µé¢
â”‚   â”‚   â”œâ”€â”€ technician_jobs.html # (15KB) æŠ€å¸ˆå·¥ä½œé¡µ
â”‚   â”‚   â””â”€â”€ user_home.html      # (7.2KB) ç”¨æˆ·ä¸»é¡µ
â”‚   â”œâ”€â”€ admin/                  # ç®¡ç†å‘˜é™æ€é¡µé¢
â”‚   â”‚   â””â”€â”€ login.html          # ç®¡ç†å‘˜ç™»å½•é™æ€é¡µ
â”‚   â”œâ”€â”€ issues/                 # é—®é¢˜è¯Šæ–­é¡µé¢
â”‚   â”‚   â”œâ”€â”€ disinfection-cabinet/
â”‚   â”‚   â”œâ”€â”€ gas-stove/
â”‚   â”‚   â”œâ”€â”€ integrated-stove/
â”‚   â”‚   â”œâ”€â”€ range-hood/
â”‚   â”‚   â””â”€â”€ water-heater/
â”‚   â”œâ”€â”€ solution/               # è§£å†³æ–¹æ¡ˆé¡µé¢
â”‚   â”‚   â”œâ”€â”€ disinfection-cabinet/ # æ¶ˆæ¯’æŸœè§£å†³æ–¹æ¡ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ D01/, D02/, D03/, other/
â”‚   â”‚   â”œâ”€â”€ gas-stove/          # ç‡ƒæ°”ç¶è§£å†³æ–¹æ¡ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ G01/, G02/, G03/, other/
â”‚   â”‚   â”œâ”€â”€ integrated-stove/   # é›†æˆç¶è§£å†³æ–¹æ¡ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ E01/, E02/, E03/, other/
â”‚   â”‚   â”œâ”€â”€ range-hood/         # æ²¹çƒŸæœºè§£å†³æ–¹æ¡ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ H01/, H02/, H03/, other/
â”‚   â”‚   â””â”€â”€ water-heater/       # çƒ­æ°´å™¨è§£å†³æ–¹æ¡ˆ
â”‚   â”‚       â”œâ”€â”€ W01/, W02/, W03/, other/
â”‚   â”œâ”€â”€ index.html              # é™æ€ä¸»é¡µ
â”‚   â”œâ”€â”€ booking.html            # é™æ€é¢„çº¦é¡µé¢
â”‚   â”œâ”€â”€ _headers                # Cloudflare Headersé…ç½®
â”‚   â”œâ”€â”€ _redirects              # é‡å®šå‘è§„åˆ™
â”‚   â”œâ”€â”€ README.md               # å‰ç«¯è¯´æ˜æ–‡æ¡£
â”‚   â””â”€â”€ wrangler.toml           # Cloudflare Workersé…ç½®
â”‚
â”œâ”€â”€ backend/                     # åç«¯ä»£ç  (FastAPI/Python)
â”‚   â”œâ”€â”€ requirements.txt        # Pythonä¾èµ– âœ¨å·²æ›´æ–°
â”‚   â”œâ”€â”€ requirements-dev.txt    # å¼€å‘ä¾èµ–
â”‚   â”œâ”€â”€ alembic.ini             # æ•°æ®åº“è¿ç§»é…ç½®
â”‚   â”œâ”€â”€ alembic/                # æ•°æ®åº“è¿ç§»è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ env.py              # Alembicç¯å¢ƒé…ç½®
â”‚   â”‚   â””â”€â”€ versions/           # è¿ç§»ç‰ˆæœ¬æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ 001_rbac_v2_add_category_and_system_roles.py
â”‚   â”‚       â””â”€â”€ 002_add_ticket_models.py
â”‚   â”œâ”€â”€ app/                    # FastAPIåº”ç”¨æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ main.py             # (7.0KB) åº”ç”¨å…¥å£ç‚¹
â”‚   â”‚   â”œâ”€â”€ api/                # APIè·¯ç”±æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.py        # (26KB) ç®¡ç†å‘˜API
â”‚   â”‚   â”‚   â”œâ”€â”€ appointments.py # (7.6KB) é¢„çº¦API
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py         # (12KB) è®¤è¯API
â”‚   â”‚   â”‚   â”œâ”€â”€ files.py        # (1.5KB) æ–‡ä»¶API
â”‚   â”‚   â”‚   â””â”€â”€ tickets.py      # (14KB) å·¥å•API
â”‚   â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒé…ç½®æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py       # åº”ç”¨é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ deps.py         # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â”‚   â””â”€â”€ security.py     # å®‰å…¨ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ db/                 # æ•°æ®åº“æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py         # æ•°æ®åº“åŸºç¡€é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ seed.py         # æ•°æ®ç§å­
â”‚   â”‚   â”‚   â””â”€â”€ session.py      # æ•°æ®åº“ä¼šè¯
â”‚   â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py     # æ¨¡å‹åŒ…åˆå§‹åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ audit.py        # (2.6KB) å®¡è®¡æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ role.py         # (4.3KB) è§’è‰²æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ session.py      # (2.1KB) ä¼šè¯æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ technician.py   # (2.8KB) æŠ€å¸ˆæ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ ticket.py       # (5.7KB) å·¥å•æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ ticket_image.py # (3.0KB) å·¥å•å›¾ç‰‡æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ user.py         # (3.3KB) ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â””â”€â”€ services/           # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ audit_service.py    # (7.5KB) å®¡è®¡æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ auth_service.py     # (17KB) è®¤è¯æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ email_service.py    # (15KB) é‚®ä»¶æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ rbac_service.py     # (19KB) æƒé™æ§åˆ¶æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ storage_service.py  # (7.3KB) å­˜å‚¨æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ tickets_service.py  # (14KB) å·¥å•æœåŠ¡
â”‚   â”‚       â””â”€â”€ map/                # åœ°å›¾æœåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ tests/                  # æµ‹è¯•æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ __init__.py         # æµ‹è¯•åŒ…åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ test_auth.py        # è®¤è¯æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_integration.py # é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_issues_integration.py # é—®é¢˜é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_server_status.py # æœåŠ¡å™¨çŠ¶æ€æµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_tickets_api.py # å·¥å•APIæµ‹è¯•
â”‚   â”œâ”€â”€ scripts/                # æ‰¹å¤„ç†è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ deploy_to_cloudflare.bat # Cloudflareéƒ¨ç½²è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ package_for_cloudflare.bat # Cloudflareæ‰“åŒ…è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ quick_start.bat     # å¿«é€Ÿå¯åŠ¨è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ seed_rbac_v2.py     # (8.9KB) RBACæ•°æ®ç§å­
â”‚   â”‚   â”œâ”€â”€ seed_tickets.py     # (8.5KB) å·¥å•æ•°æ®ç§å­
â”‚   â”‚   â”œâ”€â”€ start_rbac_v2.bat   # RBACå¯åŠ¨è„šæœ¬
â”‚   â”‚   â””â”€â”€ start_server.bat    # æœåŠ¡å™¨å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ functions_disabled/     # Cloudflare Workers (å·²ç¦ç”¨)
â”‚       â”œâ”€â”€ [[path]].js         # åŠ¨æ€è·¯ç”±å‡½æ•°
â”‚       â”œâ”€â”€ _middleware.js      # ä¸­é—´ä»¶
â”‚       â”œâ”€â”€ _routes.json        # è·¯ç”±é…ç½®
â”‚       â””â”€â”€ api.py              # APIå‡½æ•°
â”‚
â”œâ”€â”€ docs/                        # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture_dify_v1.1.md      # (13KB) æŠ€æœ¯æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ APPOINTMENTS_FEATURE_README.md # (6.9KB) é¢„çº¦åŠŸèƒ½æ–‡æ¡£
â”‚   â”œâ”€â”€ AUTH_SYSTEM_README.md          # (8.5KB) è®¤è¯ç³»ç»Ÿæ–‡æ¡£
â”‚   â”œâ”€â”€ CLOUDFLARE_DEPLOYMENT_SUMMARY.md # (4.7KB) Cloudflareéƒ¨ç½²æ–‡æ¡£
â”‚   â”œâ”€â”€ ISSUES_INTEGRATION_SUMMARY.md  # (3.4KB) é—®é¢˜é›†æˆæ–‡æ¡£
â”‚   â”œâ”€â”€ RBAC_V2_SYSTEM_OVERVIEW.md     # (7.8KB) RBACç³»ç»Ÿæ–‡æ¡£
â”‚   â””â”€â”€ TICKETS_FEATURE_SUMMARY.md     # (6.2KB) å·¥å•åŠŸèƒ½æ–‡æ¡£
â”‚
â”œâ”€â”€ data/                        # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ app.db                  # (204KB) SQLiteä¸»æ•°æ®åº“
â”‚   â”œâ”€â”€ .keep                   # ä¿æŒç›®å½•çš„ç©ºæ–‡ä»¶
â”‚   â”œâ”€â”€ exports/                # æ•°æ®å¯¼å‡ºç›®å½•
â”‚   â””â”€â”€ uploads/                # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”‚       â””â”€â”€ tickets/            # å·¥å•ç›¸å…³ä¸Šä¼ 
â”‚
â”œâ”€â”€ venv/                        # Pythonè™šæ‹Ÿç¯å¢ƒ
â”œâ”€â”€ .git/                        # Gitç‰ˆæœ¬æ§åˆ¶
â”œâ”€â”€ .github/                     # GitHubé…ç½®
â”œâ”€â”€ .vscode/                     # VSCodeé…ç½®
â”œâ”€â”€ .wrangler/                   # Wranglerç¼“å­˜
â”œâ”€â”€ .pytest_cache/               # Pytestç¼“å­˜
â”œâ”€â”€ README.md                    # (4.0KB) ä¸»é¡¹ç›®è¯´æ˜
â”œâ”€â”€ PROJECT_STRUCTURE.md         # (4.0KB) é¡¹ç›®ç»“æ„æ–‡æ¡£ âœ¨æœ¬æ–‡æ¡£
â”œâ”€â”€ .gitignore                  # Gitå¿½ç•¥è§„åˆ™
â”œâ”€â”€ .gitattributes              # Gitå±æ€§é…ç½®
â”œâ”€â”€ .gitmodules                 # Gitå­æ¨¡å—é…ç½®
â”œâ”€â”€ wrangler.toml               # Cloudflareå…¨å±€é…ç½®
â””â”€â”€ package-lock.json           # Node.jsä¾èµ–é”å®šæ–‡ä»¶
```

## ğŸ”§ é…ç½®æ–‡ä»¶æ›´æ–°

### å‰ç«¯ (`frontend/package.json`) 
```json
{
  "name": "meidasupport-frontend",
  "scripts": {
    "dev": "python -m http.server 3000",
    "start": "python -m http.server 8080",
    "build": "echo 'No build step needed for static HTML/CSS/JS'"
  }
}
```

### åç«¯ (`backend/requirements.txt`) 
æ–°å¢äº†ä»¥ä¸‹ä¾èµ–ï¼š
- `pyotp==2.8.0` (åŒå› å­è®¤è¯)
- `qrcode[pil]==7.4.2` (äºŒç»´ç ç”Ÿæˆ)
- `aiofiles==23.1.0` (å¼‚æ­¥æ–‡ä»¶æ“ä½œ)
- `python-dotenv==1.0.0` (ç¯å¢ƒå˜é‡)
- `alembic==1.11.1` (æ•°æ®åº“è¿ç§»)
- `pillow==10.0.0` (å›¾åƒå¤„ç†)

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### å‰ç«¯å¼€å‘æœåŠ¡å™¨
```bash
cd frontend
npm run dev
# æˆ–ç›´æ¥ä½¿ç”¨ Python
python -m http.server 3000
```

### åç«¯APIæœåŠ¡å™¨
```bash
cd backend
pip install -r requirements.txt
uvicorn app.main:app --reload
```

## ğŸ“ GitçŠ¶æ€
æ‰€æœ‰æ–‡ä»¶ç§»åŠ¨éƒ½ä½¿ç”¨äº† `git mv` å‘½ä»¤ï¼Œå®Œæ•´ä¿ç•™äº†Gitå†å²è®°å½•ã€‚å½“å‰çŠ¶æ€ï¼š
- âœ… æ‰€æœ‰å‰ç«¯æ–‡ä»¶å·²ç§»è‡³ `frontend/`
- âœ… æ‰€æœ‰åç«¯æ–‡ä»¶å·²ç§»è‡³ `backend/`  
- âœ… æ‰€æœ‰æ–‡æ¡£å·²ç§»è‡³ `docs/`
- âœ… æ•°æ®æ–‡ä»¶ä¿ç•™åœ¨ `data/`
- âœ… Gitå†å²å®Œæ•´ä¿ç•™

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡ä¿¡æ¯

### ä»£ç è¡Œæ•°ç»Ÿè®¡
- **å‰ç«¯ä»£ç **: ~300KB (HTML/CSS/JSæ¨¡æ¿æ–‡ä»¶)
- **åç«¯ä»£ç **: ~150KB (Python FastAPIåº”ç”¨)
- **æ–‡æ¡£**: ~50KB (æŠ€æœ¯æ–‡æ¡£å’Œè¯´æ˜)
- **é…ç½®æ–‡ä»¶**: ~10KB (å„ç§é…ç½®æ–‡ä»¶)

### æ–‡ä»¶ç±»å‹åˆ†å¸ƒ
- **Pythonæ–‡ä»¶**: 30+ ä¸ª (åç«¯é€»è¾‘ã€æ¨¡å‹ã€æœåŠ¡)
- **HTMLæ¨¡æ¿**: 25+ ä¸ª (å‰ç«¯é¡µé¢æ¨¡æ¿)
- **JavaScript/CSS**: 2 ä¸ªä¸»è¦æ–‡ä»¶
- **é…ç½®æ–‡ä»¶**: 10+ ä¸ª (å„ç§ç¯å¢ƒé…ç½®)
- **æ–‡æ¡£æ–‡ä»¶**: 8 ä¸ª (é¡¹ç›®æ–‡æ¡£)

### åŠŸèƒ½æ¨¡å—
- **è®¤è¯ç³»ç»Ÿ**: å®Œæ•´çš„RBACæƒé™æ§åˆ¶
- **å·¥å•ç³»ç»Ÿ**: å·¥å•ç®¡ç†å’ŒæŠ€å¸ˆåˆ†æ´¾
- **é¢„çº¦ç³»ç»Ÿ**: å®¢æˆ·é¢„çº¦å’Œæ—¶é—´ç®¡ç†
- **æ–‡ä»¶ç®¡ç†**: å›¾ç‰‡ä¸Šä¼ å’Œå­˜å‚¨
- **å®¡è®¡ç³»ç»Ÿ**: æ“ä½œæ—¥å¿—å’Œå®¡è®¡è¿½è¸ª

## ğŸ¯ ä¸‹ä¸€æ­¥æ“ä½œ
1. æäº¤å½“å‰æ›´æ”¹: `git commit -m "é‡ç»„é¡¹ç›®ç»“æ„ï¼šåˆ†ç¦»å‰åç«¯"`
2. æ›´æ–°ä»»ä½•ç¡¬ç¼–ç çš„è·¯å¾„å¼•ç”¨
3. æµ‹è¯•å‰åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨
4. æ›´æ–°éƒ¨ç½²è„šæœ¬ä¸­çš„è·¯å¾„é…ç½®
5. æ£€æŸ¥æ¨¡æ¿ä¸­çš„é™æ€æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®

---

*æœ€åæ›´æ–°: 2025å¹´9æœˆ21æ—¥*  
*æ–‡æ¡£ç‰ˆæœ¬: v1.1* 